<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>cargar archivo json</title>
  <style>
    body {
      background-color: aliceblue;
      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    }
  </style>
</head>

<body>
  <h1>Cargar archivo de texto</h1>
  <input id="file" type="file" accept=".txt, text/plain, .json">
  <button id="show" type="button">Mostrar</button>
  <h2>Contenido: </h2>
  <pre id="out"> no hay contenido </pre>
  <script>
    const input = document.getElementById('file');
    const out = document.getElementById('out');
    document.getElementById('show').addEventListener('click', async () => {
      const f = input.files?.[0];
      if (!f) { out.textContent = 'Primero elige un archivo .txt'; return; }
      const text = await f.text();

      const jObject = JSON.parse(text);
      //console.log(jObject[0].id);
      //console.log(jObject[0]["id"]);
      const message = jObject[0]["id"]


      const table = document.createElement('table');
      const headers = Object.keys(jObject[0]);


      const headerRow = document.createElement('tr');
      headers.forEach(h => {
        const th = document.createElement('th');
        th.textContent = h;
        headerRow.appendChild(th);
      });
      table.appendChild(headerRow);


      jObject.forEach(obj => {
        const tr = document.createElement('tr');
        headers.forEach(h => {
          const td = document.createElement('td');
          td.textContent = obj[h];
          tr.appendChild(td);
        });
        table.appendChild(tr);
      });


    
      out.appendChild(table)
out.innerHTML = '';
      //out.textContent = text;
    });

  </script>
</body>


</html>

